<div class="ai-request">
  <h2>🤖 AI Request</h2>
  <p>Make an AI inference request using the configured providers.</p>

  <form (ngSubmit)="onSubmit($event)" class="request-form">
    <div class="form-group">
      <label for="prompt">Prompt:</label>
      <textarea
        id="prompt"
        [(ngModel)]="prompt"
        name="prompt"
        placeholder="Enter your prompt here..."
        rows="4"
        required
      ></textarea>
    </div>

    <div class="form-group">
      <label for="mode">Mode:</label>
      <select
        id="mode"
        [(ngModel)]="mode"
        name="mode"
      >
        <option value="synchronous">Synchronous (try providers sequentially)</option>
        <option value="concurrent">Concurrent (try all providers simultaneously)</option>
      </select>
    </div>

    <button type="submit" [disabled]="loading || !prompt.trim()">
      {{ loading ? '🔄 Processing...' : '🚀 Send Request' }}
    </button>
  </form>

  <div *ngIf="error" class="error-message">
    <h3>❌ Error</h3>
    <p>{{ error }}</p>
  </div>

  <div *ngIf="response" class="response-section">
    <h3>✅ Response</h3>
    <div class="response-details">
      <p><strong>Prompt:</strong> {{ response.prompt }}</p>
      <p><strong>Mode:</strong> {{ response.mode }}</p>
      <p><strong>Response:</strong></p>
      <div class="response-text">{{ response.response }}</div>
      <details>
        <summary>Raw Response</summary>
        <pre>{{ response.raw_response | json }}</pre>
      </details>
    </div>
  </div>
</div>
